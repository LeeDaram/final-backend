<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
		<mapper namespace="CommonSql">
	<sql id="storePaginationSql">
               SELECT ROW_NUMBER() OVER (ORDER BY g.store_id ASC) AS row_num,
                    g.store_id as g_store_id,
                    g.user_id,
                    g.INDUSTRY_ID,
                    g.CONTACT,
                    g.STORE_IMAGE,
                    g.AVERAGE_RATING,
                    g.TAKEOUT,
                    g.DELIVERY,
                    g.WIFI,
                    g.PET,
                    g.KID,
                    g.PARKING,
                    b.STORE_NAME,
                    a.store_id as a_store_id,
                    a.main_menu,
                    a.price,
                    i.INDUSTRY_NAME,
                    sg.SIGUNGU_NAME,
                    sd.SIDO_NAME 
               FROM GOOD_PRICE_BUSINESS g
               JOIN BUSINESS_USER b
               ON g.USER_ID = b.USER_ID
               JOIN APPROVAL_MANAGEMENT a
               ON g.store_id = a.store_id
               JOIN INDUSTRY i 
               ON g.INDUSTRY_ID = i.INDUSTRY_ID
               JOIN SIGUNGU sg
               ON b.SIGUNGU_ID = sg.SIGUNGU_ID 
               JOIN SIDO sd
               ON sg.SIDO_ID = sd.SIDO_ID
    </sql>

    <sql id="paginationWhere">
        <![CDATA[WHERE row_num >= #{pageable.offset} + 1 AND row_num <= #{pageable.offset} + #{pageable.pageSize}]]>
    </sql>
</mapper>